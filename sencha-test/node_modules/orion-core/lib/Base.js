"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}function copyIf(a,b,c){var d,e,f;if(c)for(d=0,f=c.length;d<f;++d)e=c[d],e in a||(a[e]=b[e]);else for(e in b)e in a||(a[e]=b[e])}function createInstantiator(a){var b,c="";for(b=0;b<a;++b)c+=(b?",":"")+"args["+b+"]";return new Function("T,args","return new T("+c+");")}function getAllKeys(a,b){for(var c,d,e,f,g=[],h={};a&&a!==b;a=(0,_getPrototypeOf2["default"])(a))for(f=(0,_getOwnPropertyNames2["default"])(a),c=0,e=f.length;c<e;++c)d=f[c],h[d]||(h[d]=!0,g.push(d));return g}function processMixins(a){var b,c,d,e,f,g,h,i,j,k,l=a.meta,m=l.classes,n=l.classMap,o=l.mixins,p=l.mixinMap,q=l.staticMixinMap,r=a.prototype;for(d=0;d<o.length;++d){if(e=o[d],"string"==typeof e&&(o[d]=e=require(e)),!Base.isPrototypeOf(e))throw new Error("Mixin class must extend Base - "+e.name);if(e.prototype.self!==e&&e.decorate(),j=e.meta,!n[j.id]){for(i=j.classes,f=0;f<i.length;++f)b=i[f],c=b.meta,n[c.id]||(n[c.id]=b,m.push(b),g=c.mixinId,g&&!p[g]&&(p[g]=b.prototype,q[g]=b));h=getAllKeys(k=e.prototype,Base.prototype),copyIf(r,k,h),h=getAllKeys(e,Base),copyIf(a,e,h)}}}var _getOwnPropertyNames=require("babel-runtime/core-js/object/get-own-property-names"),_getOwnPropertyNames2=_interopRequireDefault(_getOwnPropertyNames),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_assign=require("babel-runtime/core-js/object/assign"),_assign2=_interopRequireDefault(_assign),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),Base=function(){function a(b){(0,_classCallCheck3["default"])(this,a);var c=this;c.self!==c.constructor&&c.constructor.decorate(),c.initializing=!0,c.$config=b,b&&(0,_assign2["default"])(this,b),c.callChain("ctor",!1),c.initializing=!1,c.initialized=!0}return(0,_createClass3["default"])(a,[{key:"destroy",value:function(){var b=this;return b.destroy=a.emptyFn,b.destroyed=!0,b.destroying=!0,b.callChain("dtor",!0),b.destroying=!1,null}},{key:"callChain",value:function(a,b,c){var d,e,f,g=this.self.meta.classes,h=0,i=g.length,j=1,k=void 0===c,l=!k&&c&&void 0!==c.length&&Array.isArray(c);for(b&&(h=i-1,i=j=-1),f=h;f!==i;f+=j)(d=g[f].prototype).hasOwnProperty(a)&&(e=d[a],k?e.call(this):l?e.apply(this,c):e.call(this,c))}},{key:"reconfigure",value:function(a){a&&((0,_assign2["default"])(this.$config,a),(0,_assign2["default"])(this,a))}}],[{key:"construct",value:function(a,b){var c=b?b.length:0,d=instantiators[c]||(instantiators[c]=createInstantiator(c));return d(a,b)}},{key:"create",value:function(b){return a.construct(this,arguments)}},{key:"emptyFn",value:function(){}},{key:"identityFn",value:function(a){return a}},{key:"decorate",value:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s=r.prototype,t=null;if(s.self===r)return r;if(c=d=0,s.self=r,g={},k={},o={},r===a?f=[]:(t=(0,_getPrototypeOf2["default"])(r),t.prototype.hasOwnProperty("self")||t.decorate(),q=t.meta,f=(p=q.classes).slice(),(0,_assign2["default"])(g,q.classMap),(0,_assign2["default"])(k,q.mixinMap),(0,_assign2["default"])(o,q.staticMixinMap)),void 0===b&&(b=r.meta,b&&b["class"]&&(b=null)),s.mixins=k,r.mixins=o,h={id:nextId++,"class":r,superclass:t,classes:f,classMap:g,mixinMap:k,staticMixinMap:o},Object.defineProperty(r,"meta",{value:h}),b){for(m in b)m in h||(h[m]=b[m]);n=b.prototype,n&&(delete h.prototype,(0,_assign2["default"])(s,n)),n=b.statics,n&&(delete h.statics,(0,_assign2["default"])(r,n)),h.mixins&&(c=f.length,processMixins(r),d=f.length)}if(g[h.id]=r,f.push(r),p)for(j=0,l=p.length;j<l;++j)i=(e=p[j]).meta.extended,i&&i.call(e,r);for(j=c;j<d;++j)i=(e=f[j]).meta.mixed,i&&i.call(e,r);return r}},{key:"meta",get:function(){return null}}]),a}(),nextId=1,instantiators={},ignoreKeys={_init:1,_destroy:1,init:1,destroy:1};Base.emptyFn.$nullFn=!0,Base.identityFn.$nullFn=!0,Base.prototype.isInstance=!0,Base.decorate(),module.exports=Base;