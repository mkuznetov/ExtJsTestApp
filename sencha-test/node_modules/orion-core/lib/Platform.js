"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),fs=require("fs"),os=require("os"),xfs=require("./xfs"),mkdirp=require("mkdirp"),Base=require("./Base"),Platform=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){var a=this,b=a.app.license,c=xfs.profileDir.join(b.appShortName).join(b.appMajorVer+"");mkdirp.sync(a.appRoot=c.getPath()),a.clearLog(),a.log("***** STARTING "+b.appName+"*****")}},{key:"error",value:function(a){this.writeMsg(" -- [E] "+a)}},{key:"log",value:function(a){this.writeMsg(" -- [I] "+a)}},{key:"warn",value:function(a){this.writeMsg(" -- [W] "+a)}},{key:"writeMsg",value:function(a){var b=new Date;fs.appendFileSync(xfs.join(this.appRoot,this.logFileName),b.toISOString()+a+"\n")}},{key:"clearLog",value:function(){try{fs.unlinkSync(xfs.join(this.appRoot,this.logFileName))}catch(a){}}},{key:"asar",get:function(){return this._asar},set:function(a){this._asar=a,this.asarExists=fs.existsSync(a)}},{key:"asarExists",get:function(){return this._asarExists},set:function(a){this._asarExists=!!a}}],[{key:"meta",get:function(){return{prototype:{logFileName:"log.txt"}}}}]),b}(Base);module.exports=Platform;