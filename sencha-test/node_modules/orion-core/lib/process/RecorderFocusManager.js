"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),Base=require("orion-core/lib/Base"),Util=require("orion-core/lib/Util"),path=require("path"),fork=require("child_process").fork,ChildProcessTask=require("orion-core/lib/tasks/ChildProcessTask"),fs=require("fs"),topperProc,task,RecorderFocusManager=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"update",value:function(a,b){var c,d=path.join("node_modules","orion-core","node_modules","native-window","lib","osxtopper.js"),e=process.resourcesPath,f="Electron";return fs.existsSync(path.join(e,"app.asar"))&&(d="app.asar/node_modules/orion-core/node_modules/native-window/lib/osxtopper.js",f="Sencha Studio",c=e),task&&task.stop(),task=new ChildProcessTask({description:"Recorder Focus Manager",executable:d,module:d,args:[a,b,"Sencha Test Sandbox",f],stdoutLevel:"debug",opts:{env:{ATOM_SHELL_INTERNAL_RUN_AS_NODE:"0"},silent:!0,cwd:c},launchProcess:function(){var a=this;return topperProc=fork(a.module,a.args,a.opts)}}),topperProc}}]),b}(Base);module.exports=RecorderFocusManager;