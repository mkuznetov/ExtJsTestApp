"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),WorkspaceMember=require("../WorkspaceMember"),Scenario=require("./Scenario"),Url=require("url"),urlParse=Url.parse,Path=require("path"),TargetUrl=require("../TargetUrl"),File=require("orion-core/lib/fs/File"),Project=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){var a,b,c=this,d=c.data,e=d.libs,f=d.coverageFilters;for(d.framework=d.framework||"jasmine",d.libs=e||(e=[]),d.coverageFilters=f||(f=[]),c.scenarios=[],a=e.length;a-- >0;)b=e[a],"string"==typeof b&&(e[a]={path:b});d.scenarios?d.scenarios.forEach(function(a){c.scenarios.push(new Scenario(a,c))}):d.scenarios=[]}},{key:"launchAppWatch",value:function(){return!!this.get("launchAppWatch")}},{key:"addScenario",value:function(a){var b=new Scenario(a,this);return this.scenarios.push(b),b}},{key:"eachScenario",value:function(a,b){var c,d=this.scenarios,e=d.length;for(c=0;c<e&&a.call(b,d[c])!==!1;++c);}},{key:"getTestFramework",value:function(){var a=this.get("framework");return a||null}},{key:"getOwner",value:function(){var a=this.owner;return a.isWorkspace&&a.isSoloApp()?a.apps[0]:a}},{key:"getTargetUrl",value:function(a,b){var c,d=this,e=d.get("subjectUrl"),f=d.getOwner(),g=f&&f.getTargetUrl&&f.getTargetUrl(a,b);return e&&(c=urlParse(e),c.hostname)?e:[g,e].filter(function(a){return!!a}).join("")}},{key:"getWorkspaceMountDir",value:function(){return this.data.workspaceMountDir||this.getWorkspace().dir}},{key:"getScenarioFromPath",value:function(a){var b,c,d,e=File.get(a),f=this.scenarios;for(b=0;b<f.length;b++)if(c=f[b],d=File.get(this.resolve(c.get("directory"))),d.contains(e)||d.equals(e))return c;return null}},{key:"isTestProject",get:function(){return!0}}],[{key:"meta",get:function(){return{mixins:[TargetUrl]}}},{key:"defaultDir",get:function(){return"test"}},{key:"jsonName",get:function(){return"project.json"}},{key:"kind",get:function(){return"Test Project"}}]),b}(WorkspaceMember);module.exports=Project;