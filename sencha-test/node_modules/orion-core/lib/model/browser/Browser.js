"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),_getIterator2=require("babel-runtime/core-js/get-iterator"),_getIterator3=_interopRequireDefault(_getIterator2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),Entity=require("orion-core/lib/model/Entity"),Observable=require("orion-core/lib/Observable"),Strings=require("orion-core/lib/Strings"),Version=require("orion-core/lib/Version"),canonicalNames={"android browser":"android",android:"android",chrome:"chrome",chromium:"chromium",edge:"edge",htmlunit:"htmlunit","microsoft edge":"edge",microsoftedge:"edge",MicrosoftEdge:"edge",ie:"ie","internet explorer":"ie","ie mobile":"iemobile",ipad:"ipad",iphone:"iphone",firefox:"firefox",opera:"opera","opera browser":"operamobile",safari:"safari","mobile safari":"safarimobile",yandex:"yandex",phantomjs:"phantomjs"},displayNames={android:"Android",chrome:"Chrome",chromium:"Chromium",edge:"Edge",htmlunit:"HtmlUnit",ie:"Internet Explorer",iemobile:"Internet Explorer Mobile",ipad:"iPad",iphone:"iPhone",firefox:"Firefox",opera:"Opera",operamobile:"Opera Mobile",phantomjs:"PhantomJS",safari:"Safari",safarimobile:"Safari Mobile",yandex:"Yandex"},canonicalPlatforms={android:"android",ios:"ios",linux:"linux",mac:"osx",opera:"opera",osx:"osx","os x":"osx",unix:"unix",vista:"windows",windows:"windows",winphone:"windows",xp:"windows"},displayVersionLengths={chrome:1,chromium:1,edge:1,ie:1,firefox:1,opera:1},Browser=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){this.id=b.nextId()}},{key:"getCanonicalName",value:function(a){return b.getCanonicalName(a)}},{key:"getDisplayName",value:function(a){return b.getDisplayName(a)}},{key:"getCanonicalPlatform",value:function(a){return b.getCanonicalPlatform(a)}},{key:"canPersist",value:function(){return!0}},{key:"canonicalName",get:function(){var a=this;return a.getCanonicalName(a.data.type)||a.getCanonicalName(a.data.name)}},{key:"displayName",get:function(){var a=this;return a.data.description||a.getDisplayName(a.canonicalName)||a.data.name||a.data.type}},{key:"parsedVersion",get:function(){var a=this,b=a.data.version;return b&&!b.isVersion&&(b=new Version(b)),b},set:function(a){a&&!a.isVersion&&(a=new Version(a)),this.data.version=a}},{key:"displayVersion",get:function(){var a,b=this,c=displayVersionLengths[b.canonicalName]||2,d=b.parsedVersion;if(d)return a=d.major,c>1&&(a+="."+d.minor),a}},{key:"canonicalPlatform",get:function(){var a=this;return a.getCanonicalPlatform(a.data.platformName)}},{key:"displayPlatform",get:function(){var a=this,b=a.data.platformName,c=a.data.platformVersion;return b&&c&&0!=c.version&&(c=c.isVersion?c.version:c,b=b+" "+c),b}},{key:"displayLabel",get:function(){var a=this,b=a.displayName;return a.displayVersion&&(b+=" "+a.displayVersion),a.displayPlatform&&(b+=" / "+a.displayPlatform),b}}],[{key:"getCanonicalName",value:function(a){return a="string"==typeof a?a.toLowerCase():a,canonicalNames[a]}},{key:"getDisplayName",value:function(a){return displayNames[a]}},{key:"getCanonicalPlatform",value:function(a){if(null==a)return null;a="string"==typeof a?a.toLowerCase():a+"";var b=!0,c=!1,d=void 0;try{for(var e,f=(0,_getIterator3["default"])((0,_keys2["default"])(canonicalPlatforms));!(b=(e=f.next()).done);b=!0){var g=e.value;if(a.indexOf(g)>=0)return canonicalPlatforms[g]}}catch(h){c=!0,d=h}finally{try{!b&&f["return"]&&f["return"]()}finally{if(c)throw d}}return null}},{key:"meta",get:function(){return{mixins:[Observable],prototype:{isBrowser:!0}}}}]),b}(Entity);module.exports=Browser;