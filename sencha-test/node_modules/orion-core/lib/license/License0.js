"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),License=require("orion-core/lib/license/License"),TRIAL_REGEXP=/trial/i,License0=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){this.data.id=this.data.Signature}},{key:"getSignData",value:function(){var a,b=this.serialize(),c=[],d="",e=this.signFields;for(a in b)b.hasOwnProperty(a)&&e.indexOf(a)!==-1&&c.push([a,b[a]]);return c.sort(),c.forEach(function(a){d+=a[1]}),d}},{key:"serialize",value:function(){var a=this.data;return{Expires:a.Expires,Print:a.Print,Product:a.Product,Signature:a.Signature,Username:a.Username}}},{key:"email",get:function(){return this.data.Username}},{key:"expiration",get:function(){var a=this.data.Expires||null;return a&&Date.parse(a)}},{key:"fingerprint",get:function(){return this.data.Print}},{key:"product",get:function(){var a=this.data;return a.product||a.Product}},{key:"signature",get:function(){return this.data.Signature}},{key:"trial",get:function(){return TRIAL_REGEXP.test(this.data.Product)}}],[{key:"grok",value:function(a){return!!a.Username||0===a.schema}},{key:"meta",get:function(){return{prototype:{signFields:["Product","Username","Print","Expires"]},statics:{schemaVersion:0}}}}]),b}(License);module.exports=License0;