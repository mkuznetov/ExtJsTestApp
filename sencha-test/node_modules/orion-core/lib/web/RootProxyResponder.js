"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{"default":a}}var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),RootResponder=require("./RootResponder"),RootProxyResponder=function(a){function b(){return(0,_classCallCheck3["default"])(this,b),(0,_possibleConstructorReturn3["default"])(this,(b.__proto__||(0,_getPrototypeOf2["default"])(b)).apply(this,arguments))}return(0,_inherits3["default"])(b,a),(0,_createClass3["default"])(b,[{key:"ctor",value:function(){var a,b=this;b.proxyTarget=b.scenario.getProxyUrl(),b.proxy=a=b.server.getProxy(b.proxyTarget),a.on("proxyRes",function(a,c,d){var e=a.req;if(!d._interceptor){var f=b.getInterceptor(e.path,d);f&&(d._interceptor=f)}})}},{key:"get",value:function(a){a.done=!0;var b=this,c=a.request,d=a.response,e=c.headers.cookie;c.headers["Accept-Encoding"]="deflate",e&&(c.headers.cookie=e&&e.replace(/GZ=Z=1;?\s?/,"")),c.$$response=d,d.$$request=c,b.proxy.web(c,d,{target:b.proxyTarget})}}]),b}(RootResponder);module.exports=RootProxyResponder;